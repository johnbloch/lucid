event pkt (int src_ip, int dst_ip, int sport, int dport);
event count_src (int src_ip);

// component: basic packet forwarding

fun int fwd(int dst_ip) {
  if(dst_ip > 10){
    if(dst_ip < 15){
      return 1;
    }else{
      return 2;
    }
  }else{
    if(dst_ip < 5){
      return 3;
    }else{
      return 4;
    }
  }
}
event pkt(int src_ip, int dst_ip, int sport, int dport) {
    int egress = fwd(dst_ip);
    generate_port(egress, this);
}