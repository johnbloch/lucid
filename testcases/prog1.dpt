event ip_pkt (int src, int dst);
event count_src (int src);

// component: basic packet forwarding
fun int get_output_port(int dst) {
    if(dst < 100){
        if(dst < 50){
            return 0;
        }else{
            return 1;
        }
    } else {
        if(dst < 150){
            return 1;
        }else{
            return 0;
        }
    }
}
handle ip_pkt(int src, int dst) {
    int out_port = get_output_port(dst);
    generate_port(out_port, ip_pkt(src, dst));
}
